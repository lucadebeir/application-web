
<div class="container">
    <div class="jumbotron mt-5">
        <div class="col-sm-10 mx-auto" ng-controller="formCtrl" ng-app="myApp">
            <form (submit)="updateProfile()">
            <h1 class="text-center">Mes informations personnelles</h1>

            <div *ngIf="credentials.success" class="alert alert-success" role="alert">
                <label>{{credentials.success}}</label>
            </div>

            <table class="table col-md-8 mx-auto">
                <tr>
                    <td>Pseudo</td>
                    <td>{{credentials?.pseudo}}</td>
                </tr>
    
               
                
                <tr>  
                    <td><label>Email </label>
                        <div *ngIf="email.errors && (email.invalid || email.touched)">
                        <small class="text-danger" *ngIf="email.errors.pattern">Entrez une adresse mail valide !</small>
                    </div>
                    </td>
                    <td><input type="email" #email="ngModel" class="form-control" name="email" value= {{credentials?.email}}
                        [class.is-invalid]="email.invalid && email.touched" required
                        pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" 
                        [(ngModel)]="credentials.email"></td>
                       
                </tr>
            
                <tr>
                    <td>Mot de passe</td>
                    <td><button class="btn btn-outline-dark" routerLink='/update-password'>Modifier</button></td> 
                </tr>
                <tr>
                    <td><label>Voulez vous recevoir un email lorsqu'une nouvelle recette est publi√©e ?</label></td> 
                    <div *ngIf="credentials?.abonneNews">
                        <td>
                            <input type="radio" name="abonneNews" [value]="true"
                                checked [(ngModel)]="credentials.abonneNews"> Oui
                            <input type="radio" name="abonneNews" [value]="false" 
                                [(ngModel)]="credentials.abonneNews"> Non
                        </td>
                    </div>
                    <div *ngIf="!credentials?.abonneNews">
                        <td>
                            <input type="radio" name="abonneNews" [value]="true"
                                [(ngModel)]="credentials.abonneNews"> Oui
                            <input type="radio" name="abonneNews" [value]="false" 
                                checked [(ngModel)]="credentials.abonneNews"> Non
                        </td>
                    </div>
                    
                    
                </tr>
            </table>
            <button class="btn btn-outline-info btn-block col-sm-8 mx-auto" *ngIf="!email.errors" type="submit">Enregistrer les modifications</button>
            <button class="btn btn-outline-info btn-block col-sm-8 mx-auto"  *ngIf="email.errors" type="submit" disabled>Enregistrer les modifications</button>
            
            <button class="btn btn-outline-danger btn-block col-sm-8 mx-auto" (click)="deleteProfile(credentials?.pseudo)" 
                type="submit">Supprimer mon compte</button>
            </form>
        </div>
    </div>
</div>